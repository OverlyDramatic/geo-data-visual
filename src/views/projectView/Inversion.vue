<template>
  <div class="inversion-wrap">
    <el-card class="box-card">
      <div slot="header" class="glance-basic-title">
        <span>反演信息</span>
      </div>
      <div class="clearfix">
        <div class="inversion-card-content-box">
          <span class="inversion-label">
            <i class="el-icon-s-data"></i>反演结果集
          </span>
          <span class="inversion-content" v-text="`${data.basicInfo.resultsFileNum}个`"></span>
        </div>
        <div class="inversion-card-content-box">
          <span class="inversion-label">
            <i class="el-icon-place"></i>反演结果总点数
          </span>
          <span class="inversion-content" v-text="`${data.basicInfo.resultsPointNum}个`"></span>
        </div>
      </div>
    </el-card>
    <el-card class="box-card" v-for="(item, index) in data.results" :key="index + item.id">
      <div slot="header" class="glance-basic-title">
        <span v-text="item.name"></span>
      </div>
      <div class="clearfix">
        <div class="inversion-card-content-box">
          <span class="inversion-label">
            <i class="el-icon-place"></i>反演结果总点数
          </span>
          <span class="inversion-content" v-text="`${item.basicInfo.resultsPointNum}个`"></span>
        </div>
      </div>
      <el-divider></el-divider>
      <div class="clearfix">
        <div class="eCharts-box" :id="`eMap_${index}`"></div>
        <div class="eCharts-box" :id="`eBar_${index}`"></div>
      </div>
    </el-card>
  </div>
</template>
<script>
export default {
  name: 'inversion',
  props: {
    data: {
      type: Object,
      default() {
        return {
          basicInfo: {
            resultsFileNum: 3,
            resultsPointNum: 215
          },
          results: [
            {
              name: '空地1地图数据',
              path: 'abc/bcd.csv',
              id: '123',
              basicInfo: {
                resultsPointNum: 103
              },
              data: {
                x: [-10, 10],
                y: [-10, 10],
                zx: [0.0, 0.1, 0.2, 0.3, 0.4],
                z: [45, 27, 12, 3, 0],
                xyz: [
                  [0.502749979, -1.96027112, 0.137653098],
                  [0.623704255, -1.85352087, 0.15020071],
                  [0.5696854, -1.890574932, 0.166711688],
                  [0.637074649, -1.826424956, 0.175912708],
                  [0.586953223, -1.857800603, 0.1835372],
                  [-0.902049541, -1.898506522, 0.173079774],
                  [-0.463217139, -1.978921533, 0.165441215],
                  [-0.506440639, -1.984049201, 0.171212584],
                  [-0.508344948, -1.973378897, 0.161631897],
                  [0.889969289, -1.289543748, 0.232153371],
                  [0.865068436, -1.301194072, 0.226257682],
                  [0.815520942, -1.373222351, 0.237690493],
                  [0.850230217, -1.370099902, 0.225220069],
                  [0.864823818, -1.273250461, 0.278011769],
                  [0.837982237, -1.28387177, 0.270696372],
                  [0.778577566, -1.39856708, 0.290738076],
                  [0.825827837, -1.37166667, 0.266934246],
                  [0.827611029, -1.426259041, 0.254862636],
                  [0.855517685, -1.417702675, 0.220908284],
                  [0.667704523, -1.171700597, 0.241697967],
                  [0.726219535, -1.201351523, 0.268209249],
                  [0.792480886, -1.188511491, 0.292176545],
                  [0.810473859, -1.295682788, 0.340390712],
                  [0.797052026, -1.334388256, 0.335033268],
                  [0.755767941, -1.454393625, 0.347819656],
                  [0.820427358, -1.449381948, 0.34681645],
                  [0.792665541, -1.482739687, 0.316211849],
                  [0.839131951, -1.421332002, 0.259936452],
                  [0.338606656, -1.268687606, 0.185790852],
                  [0.360303193, -1.267472029, 0.179921016],
                  [0.393561959, -1.245741963, 0.162551492],
                  [0.705122888, -1.204075933, 0.314992249],
                  [0.754296839, -1.262271285, 0.318897843],
                  [0.718701541, -1.454445124, 0.355608761],
                  [0.812041402, -1.472142339, 0.360546708],
                  [0.839508414, -1.498642206, 0.345676184],
                  [0.949075282, -1.378522873, 0.298804611],
                  [0.375466883, -1.183966279, 0.173243791],
                  [0.447777927, -1.208956599, 0.186496347],
                  [0.473472536, -1.198563218, 0.174070269],
                  [0.450357318, -1.217897892, 0.175409868],
                  [0.426581889, -1.222750664, 0.162396371],
                  [0.386870563, -1.269257665, 0.17857264],
                  [0.39536494, -1.256353974, 0.174820393],
                  [0.396380454, -1.251832843, 0.174807295],
                  [0.656486809, -1.232837677, 0.298396409],
                  [0.828493536, -1.229161382, 0.30553636],
                  [0.945792675, -1.285697341, 0.31857723],
                  [0.995830476, -1.315475464, 0.271874219],
                  [0.921190917, -1.313724756, 0.205134332],
                  [0.309738934, -1.200225472, 0.198888779],
                  [0.426822603, -1.215472102, 0.216810599],
                  [0.455436915, -1.214720368, 0.210855618],
                  [0.439964265, -1.242338538, 0.21991761],
                  [0.406351209, -1.261912107, 0.211173728],
                  [0.368068457, -1.309431434, 0.223280728],
                  [0.401477784, -1.297402859, 0.22456488],
                  [0.385009527, -1.296973825, 0.219726473],
                  [0.41249764, -1.242356777, 0.194852158],
                  [0.15202412, -1.161262035, 0.183510035],
                  [0.339422703, -1.136951566, 0.201738581],
                  [0.394938529, -1.132068276, 0.200885788],
                  [0.392098397, -1.145591855, 0.202669203],
                  [0.374922097, -1.170744896, 0.196079433],
                  [0.366544366, -1.203522325, 0.20360963],
                  [0.441293895, -1.169282913, 0.204223916],
                  [0.467646211, -1.205286741, 0.219436839],
                  [0.50799787, -1.163199067, 0.203240439],
                  [0.512941837, -1.152075648, 0.195813105],
                  [-0.544995248, -1.005139112, 0.170955494],
                  [-0.532509685, -0.965767324, 0.170315564],
                  [-0.479640692, -0.994710505, 0.180209965],
                  [-0.475510478, -0.982028842, 0.178388402],
                  [-0.376761079, -1.030805707, 0.184722647],
                  [-0.416403115, -1.004337311, 0.182979673],
                  [-0.46246019, -0.992913604, 0.176467672],
                  [0.089343451, -1.129915595, 0.178057224],
                  [0.251825184, -1.104791045, 0.201206356],
                  [0.305253059, -1.091044545, 0.201529711]
                ]
              }
            },
            {
              name: '空地2地图数据',
              path: 'abc/edf.csv',
              id: '234',
              basicInfo: {
                resultsPointNum: 87
              },
              data: {
                x: [-10, 10],
                y: [-10, 10],
                zx: [0.5, 1.0, 1.5, 2.0, 2.5],
                z: [22, 34, 12, 5, 4],
                xyz: [
                  [3.838529348, -8.912712097, 0.209055707],
                  [-8.580665588, -8.239081383, 0.233568758],
                  [-1.009099841, -8.880646706, 0.170992747],
                  [-0.992251039, -8.890048027, 0.190452814],
                  [-0.990604401, -8.897404671, 0.202369824],
                  [-1.010816097, -8.9030056, 0.210660562],
                  [-1.050055504, -8.903383255, 0.218177184],
                  [-1.096852064, -8.915341377, 0.217580974],
                  [-1.150258064, -8.917752266, 0.209322155],
                  [-1.298079014, -8.926640511, 0.203913525],
                  [3.546247244, -8.857065201, 0.260433108],
                  [3.698834896, -9.021478653, 0.173370868],
                  [3.680096626, -9.01837635, 0.187334582],
                  [3.656924486, -9.022916794, 0.198893249],
                  [3.648689747, -9.021424294, 0.201044649],
                  [3.754354477, -9.012917519, 0.203896627],
                  [3.87869215, -8.966371536, 0.295384943],
                  [-9.084422112, -8.650681496, 0.118661813],
                  [-9.089438438, -8.623597145, 0.121870466],
                  [-9.093425751, -8.594702721, 0.124217592],
                  [-9.095473289, -8.574138641, 0.124475151],
                  [-9.109218597, -8.562517166, 0.130132541],
                  [-9.098539352, -8.562992096, 0.131443501],
                  [-8.824252129, -8.394132614, 0.230683595],
                  [-8.728391647, -8.227949142, 0.27177462],
                  [-8.700894356, -8.238951683, 0.260394603],
                  [-8.682693481, -8.247386932, 0.27266252],
                  [-1.008244395, -8.954512596, 0.16625458],
                  [-1.007832289, -8.976353645, 0.173964486],
                  [-1.021472692, -8.994924545, 0.177342385],
                  [-1.050133824, -9.013033867, 0.181829005],
                  [-1.086963415, -9.024887085, 0.177836224],
                  [0.97369355, -8.814678192, 0.299328774],
                  [3.852229595, -9.070728302, 0.236941054],
                  [-9.03826046, -8.722537994, 0.123771593],
                  [-9.043347359, -8.70641613, 0.135041073],
                  [-9.053077698, -8.681097984, 0.141688079],
                  [-9.068408012, -8.658049583, 0.148833126],
                  [-9.077425003, -8.64394474, 0.150686115],
                  [-9.099767685, -8.635001183, 0.158563599],
                  [-9.102119446, -8.641057014, 0.16118446],
                  [-9.085538864, -8.643758774, 0.153853521],
                  [-8.874613762, -8.49197197, 0.269634068],
                  [-8.808599472, -8.328863144, 0.335578442],
                  [-8.783453941, -8.297682762, 0.303780556],
                  [-8.767894745, -8.283444405, 0.311103046],
                  [-8.720158577, -8.303097725, 0.298485488],
                  [-3.946471691, -8.753395081, 0.215325356],
                  [-9.023267746, -8.745102882, 0.127950221],
                  [-9.028292656, -8.741363525, 0.140717685],
                  [-9.037530899, -8.737321854, 0.153000712],
                  [-9.056269646, -8.725027084, 0.160965249],
                  [-9.067876816, -8.720899582, 0.164225653],
                  [-9.099117279, -8.713061333, 0.173312172],
                  [-9.110227585, -8.716210365, 0.170863539],
                  [-9.097828865, -8.717549324, 0.162971199],
                  [-8.919716835, -8.584170341, 0.276027173],
                  [-8.870443344, -8.414315224, 0.344619334],
                  [-8.848617554, -8.348031044, 0.30918029],
                  [-8.831689835, -8.301100731, 0.307614684],
                  [-9.017180443, -8.787603378, 0.141021967],
                  [-9.026442528, -8.795728683, 0.152426675],
                  [-9.047185898, -8.793110847, 0.161281303],
                  [-9.058039665, -8.801931381, 0.168151945],
                  [-9.086566925, -8.799397469, 0.174881458],
                  [-9.100496292, -8.797696114, 0.172056407],
                  [-9.095907211, -8.797618866, 0.163933456],
                  [-8.919303894, -8.66729641, 0.294157535],
                  [-8.880515099, -8.49034214, 0.391437382],
                  [-8.874220848, -8.40561676, 0.357612759],
                  [-8.886142731, -8.376102448, 0.355897963],
                  [-8.896159172, -8.43268013, 0.335845321],
                  [-8.797169685, -8.410973549, 0.340230078],
                  [-9.143410683, -8.449689865, 0.251180261],
                  [-9.221238136, -8.425228119, 0.233716667],
                  [-9.24629879, -8.570818901, 0.228002429],
                  [-9.02159977, -8.877337456, 0.145727873],
                  [-9.042123795, -8.881093979, 0.150291368],
                  [-9.050942421, -8.894705772, 0.154083282],
                  [-9.071822166, -8.899474144, 0.155759618],
                  [-8.911847115, -8.681434631, 0.384646654],
                  [-8.955075264, -8.648086548, 0.359202355],
                  [-9.023573875, -8.634878159, 0.358649135],
                  [-9.030611992, -8.672365189, 0.325347811],
                  [-8.885257721, -8.609321594, 0.340084285],
                  [-9.155058861, -8.380649567, 0.291979373],
                  [-9.238855362, -8.394002914, 0.277830929]
                ]
              }
            },
            {
              name: '空地3地图数据',
              path: 'abc/fdas.csv',
              id: '4315',
              basicInfo: {
                resultsPointNum: 25
              },
              data: {
                x: [-10, 10],
                y: [-10, 10],
                zx: [0.2, 0.4, 0.6, 0.8, 1.0],
                z: [1, 5, 7, 6, 6],
                xyz: [
                  [0.070668012, -0.584010541, 0.031364489],
                  [0.183724329, -0.542125404, 0.030987451],
                  [0.239446595, -0.491100311, 0.03445274],
                  [0.293569118, -0.453284115, 0.033478454],
                  [0.273135781, -0.457386762, 0.044535287],
                  [0.304649383, -0.403402746, 0.046258714],
                  [0.234530628, -0.429660827, 0.069523178],
                  [0.243637607, -0.467370987, 0.080641016],
                  [0.234060287, -0.505349755, 0.088894174],
                  [0.239905432, -0.516243458, 0.092955597],
                  [0.275510699, -0.516881943, 0.097057335],
                  [0.347646177, -0.504217029, 0.107559301],
                  [0.368272752, -0.482005566, 0.111837044],
                  [0.389944375, -0.47877574, 0.118661255],
                  [0.440773576, -0.437117964, 0.110209085],
                  [0.493948847, -0.399671137, 0.106587313],
                  [-0.508056581, -0.527797818, 0.156522214],
                  [-0.507815123, -0.500393093, 0.160851538],
                  [-0.513900876, -0.374156088, 0.141217425],
                  [-0.525470316, -0.375997186, 0.142496198],
                  [-0.486320704, -0.445988417, 0.138114423],
                  [-0.431098402, -0.48311466, 0.123043641],
                  [-0.421708256, -0.480813265, 0.118888937],
                  [-0.395230323, -0.474363059, 0.104512289],
                  [-0.350836575, -0.49916631, 0.098132186]
                ]
              }
            }
          ]
        }
      }
    }
  },
  methods: {
    // * 反演平面图
    eMap(id, result) {
      let eMap = this.$echarts.init(document.getElementById(id))
      // * 绘制图表
      eMap.setOption({
        title: { text: result.name + '平面图' },
        xAxis: {
          name: '距离 (m)',
          nameLocation: 'middle',
          type: 'value',
          min: result.data.x[0],
          max: result.data.x[1]
        },
        yAxis: {
          name: '距离 (m)',
          nameLocation: 'middle',
          type: 'value',
          min: result.data.y[0],
          max: result.data.y[1]
        },
        tooltip: {
          trigger: 'item',
          formatter: function(params) {
            return '深度 : ' + params.value[2]
          }
        },
        series: {
          type: 'scatter',
          name: 'depth',
          coordinateSystem: 'cartesian2d',
          data: result.data.xyz
        }
      })
    },
    eBar(id, result) {
      let eBar = this.$echarts.init(document.getElementById(id))
      // * 绘制图表
      eBar.setOption({
        title: { text: result.name + '深度分布图' },
        xAxis: {
          name: '深度（m）',
          nameLocation: 'middle',
          data: result.data.zx
        },
        yAxis: {
          name: '数量（个）'
        },
        series: {
          type: 'bar',
          data: result.data.z
        }
      })
    }
  },
  mounted() {
    const results = this.data.results
    for (let i in results) {
      this.eMap(`eMap_${i}`, results[i])
      this.eBar(`eBar_${i}`, results[i])
    }
    // this.drawLine()
  }
}
</script>
<style>
.inversion-card-content-box {
  float: left;
  text-align: left;
  width: 300px;
}
.inversion-label {
  color: #409eff;
}
.inversion-label::after {
  content: '：';
}
.inversion-content {
  color: #e6a23c;
}
.eCharts-box {
  width: 300px;
  height: 300px;
  float: left;
}
</style>
